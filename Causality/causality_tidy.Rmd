---
title: "Causality"
author: "Claire Liow"
institute: "University of Tokyo"
date: "5/26/2022"
output: 
  beamer_presentation:
    slide_level: 2
    toc: false
    theme: "Madrid"
    colortheme: "beaver"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(width = 100)
```

## Table of Contents
- Subset data 
- Summarize data
- Add new variable

## Load packages and data
```{r warning=FALSE, message=FALSE}
## load packages
library(tidyverse)
library(qss)

## load data
resume <- read_csv("data/resume.csv")
```

## Subset data
- `select`: Return columns by name/number/etc.
- `filter`: Return rows by name/number/etc.

```{r}
## subset data with first name
resumeN <- resume %>% 
  select(firstname)

## subset data with black names
resumeB <- resume %>% 
  filter(race == "black")

## subset data with black, female-sounding names
resumeBf <- resume %>% 
  filter(race == "black" & sex == "female")
```

## Summarize data
```{r}
## callback rate for black female names
Bf_callback <- resume %>% 
  filter(race == "black" & sex =="female") %>%
  summarize(callback_rate = mean(call, na.rm = TRUE))

## callback rate for white female names
Wf_callback <- resume %>% 
  filter(race == "white" & sex == "female") %>%
  summarize(callback_rate = mean(call, na.rm = TRUE))

## difference between white and black women
Wf_callback - Bf_callback
```

## Add new variable

\tiny

### calculate target values
The way we did previously with `filter()` and `summarise()`. 

### create factor variable
```{r}
## create a factor variable that takes one of the four values
resume <- resume %>%
  mutate(type = case_when(race == "black" & sex == "female" ~ "BlackFemale",
                          race == "black" & sex == "male" ~ "BlackMale",
                          race == "white" & sex == "female" ~ "WhiteFemale",
                          race == "white" & sex == "male" ~ "WhiteMale",
                          TRUE ~ "Other"))

head(resume)
```

