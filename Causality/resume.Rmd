---
title: "Causality"
author: "Claire Liow"
date: "5/26/2022"
output: 
  beamer_presentation:
    slide_level: 2
    toc: true
    theme: "Madrid"
    colortheme: "beaver"
---

## Load data and packages
```{r, eval=FALSE, echo=TRUE}
library(tidyverse)
library(qss)

data(resume, package = "qss")
```

## Pipe operations
```{r, eval=FALSE, echo=TRUE}
setwd("~/Dropbox/GitHub/qss-inst-tidyverse/Causality")
resume <- read_csv("data/resume.csv")

head(resume)
tail(resume)
glimpse(resume)

race.call.summary <- resume %>%
  group_by(race, call) %>%
  count()

race.call.summary

race.call.tab <- race.call.summary %>%
  pivot_wider(names_from = call,
              values_from = n) %>%
  rename(no_callback = "0", 
         yes_callback = "1") %>%
  mutate(total = no_callback + yes_callback,
         callback_rate = yes_callback/total)

race.call.tab
```

## Recode variables
```{r, eval=FALSE, echo=TRUE}
## Simple conditional statements
resume.binary <- resume %>%
  mutate(BlackFemale = if_else(race == "black" &
                               sex == "female", 1, 0))

## Recode variables
resume <- resume %>%
  mutate(type = case_when(race == "black" & sex == "male" ~ "BlackMale",
                          race == "black" & sex == "female" ~ "BlackFemale",
                          race == "while" & sex == "male" ~ "WhileMale",
                          race == "white" & sex == "female" ~ "WhiteFemale",
                          TRUE ~ "other")) 
```

## Title TBD
```{r, eval=FALSE, echo=TRUE}
callback.by.firstname <- resume %>%
  group_by(firstname) %>%
  select(firstname, call) %>%
  summarize(callback = mean(call))

head(callback.by.firstname)
```

